<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SharkHub Post</title>
<link rel="icon" type="image/png" href="img/fivecon.png">
<style>
  * { box-sizing: border-box; font-family: Arial, sans-serif; }
  body { 
    margin: 0; padding: 0; display: flex; flex-direction: column; min-height: 100vh;
    background-color: #121212; color: #fff; transition: all 0.3s;
  }
  header { display: flex; justify-content: space-between; align-items: center; background: #1e1e1e; padding: 10px 20px; flex-wrap: wrap; }
  #logoHeader { display:flex; flex-direction: column; align-items:center; gap:5px; }
  #logoHeader img { width: 150px; height:auto; }
  #telefoneBox { background: #2a2a2a; border:none; color:#fff; padding:8px; border-radius:8px; width:160px; }
  header input[type="text"] { background: #2a2a2a; border:none; padding:8px; border-radius:8px; color:#fff; width:250px; transition:0.2s; }
  header button { background:#94CF4F; border:none; color:white; padding:10px 15px; border-radius:8px; cursor:pointer; margin:5px; transition: all 0.2s; }
  header button:hover { background:#7ebf40; }
  main { flex:1; padding:20px; display:grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap:15px; }
  .card { background:#1e1e1e; border-radius:10px; padding:15px; position:relative; transition: all 0.2s; cursor:pointer; }
  .card:hover { transform: scale(1.02); background:#2a2a2a; }
  .card h4 { color:#94CF4F; }
  .edit-btn { position:absolute; top:10px; right:10px; background:transparent; border:none; color:#aaa; cursor:pointer; font-size:18px; display:none; }
  .card:hover .edit-btn { display:block; }
  .popup { position: fixed; inset:0; display:none; justify-content:center; align-items:center; z-index:1000; }
  .popup-content { background:#1e1e1e; padding:20px; border-radius:10px; width:90%; max-width:400px; transform: translateY(-50px); transition: all 0.3s; }
  .popup.show .popup-content { transform: translateY(0); }
  .popup-content input, .popup-content textarea { width:100%; background:#2a2a2a; border:none; color:#fff; padding:8px; border-radius:6px; margin-top:8px; }
  .popup-content button { background:#94CF4F; color:white; border:none; padding:10px 15px; border-radius:8px; cursor:pointer; margin:8px 5px 0 0; }
  footer { background:#1e1e1e; padding:10px; text-align:center; color:#888; font-size:14px; }
  .notification-container { position: fixed; bottom:20px; left:50%; transform: translateX(-50%); display:flex; flex-direction:column; gap:10px; z-index:2000; }
  .notification { background:#94CF4F; color:#fff; padding:10px 20px; border-radius:8px; min-width:200px; text-align:center; transform: translateY(50px); opacity:0; transition: all 0.3s; }
  .notification.show { transform: translateY(0); opacity:1; }
  @media(max-width:600px){ header input{width:100%; margin-top:10px;} }
  body.light { background:#e8e8e8; color:#000; }
  body.light #telefoneBox, body.light header input[type=text], body.light .popup-content input, body.light .popup-content textarea { background:#f5f5f5; color:#000; }
  body.light .card { background:#f0f0f0; color:#000; }
  body.light .card h4 { color:#94CF4F; }
  .card.selected { background:#7ebf40; color:#000; }
</style>
</head>
<body>
<header>
  <div id="logoHeader">
    <img id="logoTema" src="img/Design sem nome.png" alt="Logo SharkHub">
    <span>üì≤</span>
    <input type="text" id="telefoneBox" value="(00) 0000-0000">
  </div>
  <input type="text" id="search" placeholder="Pesquisar...">
  <div>
    <button id="addBtn">Adicionar</button>
    <button id="draftBtn">Rascunho</button>
    <button id="selectBtn">Selecionar</button>
    <button id="deleteBtn" style="display:none;">üóëÔ∏è Excluir</button>
    <button id="configBtn">Configura√ß√µes</button>
  </div>
</header>

<main id="cardsContainer"></main>
<footer>SharkHub Post ¬© 2025</footer>

<!-- POPUPS -->
<div class="popup" id="popupAdd">
  <div class="popup-content">
    <h3 id="popupTitle">Nova Descri√ß√£o</h3>
    <input type="text" id="titulo" placeholder="T√≠tulo">
    <input type="text" id="km" placeholder="Quilometragem">
    <input type="text" id="valor" placeholder="Valor">
    <textarea id="descricao" placeholder="Descri√ß√£o..."></textarea>
    <div style="display:flex; gap:5px;">
      <button id="salvarBtn">Salvar</button>
      <button id="rascunhoBtn">Salvar Rascunho</button>
      <button id="cancelarBtn">Cancelar</button>
    </div>
  </div>
</div>

<div class="popup" id="popupConfig">
  <div class="popup-content">
    <h3>Configura√ß√µes</h3>
    <button onclick="alternarTema()">Alternar Tema</button>
    <button onclick="abrirPopupBackup()">üíæ Backup</button>
    <button onclick="abrirPopupRascunhos()">Gerenciar Rascunhos</button>
    <button onclick="fecharPopup('popupConfig')">Fechar</button>
  </div>
</div>

<div class="popup" id="popupBackup">
  <div class="popup-content">
    <h3>Backup / Importar-Exportar</h3>
    <div style="display:flex;flex-direction:column;gap:10px;">
      <button onclick="exportarBackup()">‚¨áÔ∏è Exportar dados</button>
      <input type="file" id="inputBackup" style="display:none;" accept=".json">
      <button onclick="document.getElementById('inputBackup').click()">‚¨ÜÔ∏è Importar dados</button>
      <button onclick="fecharPopup('popupBackup')">Fechar</button>
    </div>
  </div>
</div>

<div class="popup" id="popupRascunhos">
  <div class="popup-content">
    <h3>Rascunhos</h3>
    <div id="listaRascunhos" style="display:flex;flex-direction:column; gap:5px; max-height:300px; overflow-y:auto;"></div>
    <button id="deleteDraftsBtn">üóëÔ∏è Excluir Selecionados</button>
    <button onclick="fecharPopup('popupRascunhos')">Fechar</button>
  </div>
</div>

<div class="notification-container" id="notifications"></div>

<script>
let descricoes = JSON.parse(localStorage.getItem('descricoes')||'[]');
let rascunhos = JSON.parse(localStorage.getItem('rascunhos')||'[]');
let numero = localStorage.getItem('numero') || "(00) 0000-0000";
let editIndex = null, modoSelecao=false, editRascunhoIndex=null;

const telefoneBox = document.getElementById('telefoneBox');
const cardsContainer = document.getElementById('cardsContainer');
const logoTema = document.getElementById('logoTema');

telefoneBox.value = numero;
telefoneBox.addEventListener("input",()=>{ numero=telefoneBox.value; localStorage.setItem('numero',numero); });

function render(){
  cardsContainer.innerHTML="";
  const search = document.getElementById('search').value.toLowerCase();
  descricoes.filter(d=>d.titulo.toLowerCase().includes(search)).forEach((d,i)=>{
    const card=document.createElement('div'); card.className='card'; if(modoSelecao) card.classList.add('selected');
    card.innerHTML=`<h4>${d.titulo}</h4><p>KM: ${d.km}</p><p>Valor: ${d.valor}</p>`;
    card.onclick=()=>{ if(modoSelecao){ card.classList.toggle('selected'); } else{ copiarTexto(`${d.descricao}\nüì≤ ${numero}`); } };
    cardsContainer.appendChild(card);
  });
}
function salvar(){ localStorage.setItem('descricoes',JSON.stringify(descricoes)); render(); }
function abrirPopup(id){ const p=document.getElementById(id); p.style.display='flex'; setTimeout(()=>p.classList.add('show'),10); }
function fecharPopup(id){ const p=document.getElementById(id); p.classList.remove('show'); setTimeout(()=>p.style.display='none',300); }
function copiarTexto(txt){ navigator.clipboard.writeText(txt); showNotification("Descri√ß√£o copiada!"); }

function showNotification(msg){
  const container=document.getElementById('notifications');
  const n=document.createElement('div'); n.className='notification'; n.textContent=msg; container.appendChild(n);
  setTimeout(()=> n.classList.add('show'),10);
  setTimeout(()=>{ n.classList.remove('show'); setTimeout(()=>container.removeChild(n),300); },3000);
}

document.getElementById('addBtn').onclick=()=>{ editIndex=null; titulo.value=km.value=valor.value=descricao.value=""; popupTitle.textContent="Nova Descri√ß√£o"; abrirPopup('popupAdd'); };
document.getElementById('salvarBtn').onclick=()=>{
  const t=titulo.value.trim(); if(!t) return alert("Digite um t√≠tulo.");
  const d={titulo:t,km:km.value,valor:valor.value,descricao:descricao.value};
  if(editIndex===null) descricoes.push(d); else descricoes[editIndex]=d;
  fecharPopup('popupAdd'); salvar(); 
};
document.getElementById('rascunhoBtn').onclick=()=>{
  const d={titulo:titulo.value.trim(),km:km.value,valor:valor.value,descricao:descricao.value};
  rascunhos.push(d); localStorage.setItem('rascunhos',JSON.stringify(rascunhos));
  showNotification("Rascunho salvo!"); fecharPopup('popupAdd');
};
document.getElementById('cancelarBtn').onclick=()=>fecharPopup('popupAdd');

document.getElementById('draftBtn').onclick=()=>abrirPopupRascunhos();
function abrirPopupRascunhos(){
  renderRascunhos(); abrirPopup('popupRascunhos'); fecharPopup('popupConfig');
}
function renderRascunhos(){
  const lista=document.getElementById('listaRascunhos'); lista.innerHTML="";
  rascunhos.forEach((r,i)=>{
    const div=document.createElement('div'); div.className='card'; div.innerHTML=`<h4>${r.titulo}</h4>`;
    div.dataset.index=i;
    div.onclick=()=>{ div.classList.toggle('selected'); };
    div.ondblclick=()=>{ editRascunhoIndex=i; titulo.value=r.titulo; km.value=r.km; valor.value=r.valor; descricao.value=r.descricao; popupTitle.textContent="Editar Rascunho"; abrirPopup('popupAdd'); fecharPopup('popupRascunhos'); };
    lista.appendChild(div);
  });
}

document.getElementById('deleteDraftsBtn').onclick=()=>{
  const selected=document.querySelectorAll('#listaRascunhos .card.selected');
  if(selected.length===0){ showNotification("Nenhum rascunho selecionado."); return; }
  selected.forEach(s=>{ rascunhos.splice(s.dataset.index,1); });
  localStorage.setItem('rascunhos',JSON.stringify(rascunhos));
  renderRascunhos();
  showNotification("Rascunhos exclu√≠dos!");
};

document.getElementById('configBtn').onclick=()=>abrirPopup('popupConfig');
function alternarTema(){
  document.body.classList.toggle('light');
  if(document.body.classList.contains('light')) logoTema.src='img/Design sem nome (1).png';
  else logoTema.src='img/Design sem nome.png';
}

window.onload=render;
</script>
</body>
</html>
