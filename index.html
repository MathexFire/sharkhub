<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SharkHub Post</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #121212;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s, color 0.3s;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: #1e1e1e;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header img {
      height: 40px;
    }

    header button {
      background: none;
      border: none;
      color: inherit;
      cursor: pointer;
      font-size: 18px;
    }

    main {
      padding: 20px;
    }

    .card {
      background: #1e1e1e;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.3s;
    }

    .card:hover {
      background: #292929;
    }

    .botoes {
      display: flex;
      gap: 10px;
    }

    button {
      background: #90c64c;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 6px 10px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #7bb03e;
    }

    #notificacao {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      display: none;
      animation: slideUp 0.3s ease;
      z-index: 100;
    }

    @keyframes slideUp {
      from { transform: translate(-50%, 30px); opacity: 0; }
      to { transform: translate(-50%, 0); opacity: 1; }
    }

    /* contador fixo */
    #contador {
      position: fixed;
      top: 15px;
      right: 20px;
      background: #90c64c;
      color: white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 18px;
      z-index: 99;
    }

    /* modo claro */
    body.claro {
      background-color: #f0f0f0;
      color: #222;
    }

    body.claro header {
      background: #e6e6e6;
    }

    body.claro .card {
      background: #ffffff;
    }

    body.claro .card:hover {
      background: #f7f7f7;
    }

    body.claro #notificacao {
      background: #ddd;
      color: #222;
    }

  </style>
</head>
<body>
  <header>
    <img id="logo" src="logo_escura.png" alt="SharkHub Logo" />
    <div class="botoes">
      <button id="btnTema">üåô</button>
      <button id="btnBackup">üíæ</button>
      <input type="file" id="inputBackup" accept=".json" style="display:none" />
    </div>
  </header>

  <main>
    <h1>Minhas Descri√ß√µes</h1>
    <div id="lista"></div>
  </main>

  <div id="contador">0</div>
  <div id="notificacao"></div>

  <script>
    let descricoes = JSON.parse(localStorage.getItem("descricoes") || "[]");
    let tema = localStorage.getItem("tema") || "escuro";
    let numero = localStorage.getItem("numero") || "(49) 9923-0197";

    function salvar() {
      localStorage.setItem("descricoes", JSON.stringify(descricoes));
      atualizarContador();
    }

    function atualizarContador() {
      document.getElementById("contador").innerText = descricoes.length;
    }

    function render() {
      const lista = document.getElementById("lista");
      lista.innerHTML = "";
      descricoes.forEach((d, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
          <div>
            <strong>${d.titulo}</strong><br />
            <small>${d.texto}</small>
          </div>
          <div>
            <button onclick="editar(${i})">‚úèÔ∏è</button>
            <button onclick="excluir(${i})">üóëÔ∏è</button>
          </div>
        `;
        lista.appendChild(div);
      });
      atualizarContador();
    }

    function editar(i) {
      const novoTexto = prompt("Edite a descri√ß√£o:", descricoes[i].texto);
      if (novoTexto !== null) {
        descricoes[i].texto = novoTexto;
        salvar();
        render();
      }
    }

    function excluir(i) {
      if (confirm("Excluir esta descri√ß√£o?")) {
        descricoes.splice(i, 1);
        salvar();
        render();
      }
    }

    function mostrarNotificacao(msg) {
      const n = document.getElementById("notificacao");
      n.innerText = msg;
      n.style.display = "block";
      setTimeout(() => n.style.display = "none", 2000);
    }

    document.getElementById("btnTema").addEventListener("click", () => {
      document.body.classList.toggle("claro");
      tema = document.body.classList.contains("claro") ? "claro" : "escuro";
      localStorage.setItem("tema", tema);
      atualizarLogo();
    });

    function atualizarLogo() {
      const logo = document.getElementById("logo");
      logo.src = document.body.classList.contains("claro")
        ? "Design sem nome (1).png"
        : "logo_escura.png";
    }

    document.getElementById("btnBackup").addEventListener("click", () => {
      const data = {
        descricoes,
        numero
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], {
        type: "application/json"
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "backup_sharkhub.json";
      a.click();
      URL.revokeObjectURL(url);
      mostrarNotificacao("üíæ Backup exportado!");
    });

    document.getElementById("inputBackup").addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();

      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);

          // ‚úÖ Junta as descri√ß√µes importadas com as existentes, sem apagar as antigas
          const novasDescricoes = data.descricoes || [];
          novasDescricoes.forEach(desc => {
            if (!descricoes.some(d => d.titulo === desc.titulo)) {
              descricoes.push(desc);
            }
          });

          // Atualiza telefone se existir
          if (data.numero) {
            numero = data.numero;
          }

          salvar();
          render();
          mostrarNotificacao("‚úÖ Backup importado e mesclado!");
        } catch (err) {
          mostrarNotificacao("‚ùå Erro ao importar: " + err.message);
        }
      };

      reader.readAsText(file);
    });

    window.onload = () => {
      render();
      if (tema === "claro") document.body.classList.add("claro");
      atualizarLogo();
    };
  </script>
</body>
</html>
