<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SharkHub Post</title>
<link rel="icon" type="image/png" href="img/fivecon.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&display=swap" rel="stylesheet">

<style>
* {
  box-sizing: border-box;
  font-family: Arial, sans-serif;
  transition: all 0.3s ease;
}

body {
  background-color: #121212;
  color: #fff;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* ---------------- HEADER ---------------- */

header {
  display: flex;
  flex-direction: column;
  background: #1e1e1e;
  padding: 10px 20px;
}

#topRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

#logoHeader {
  display: flex;
  align-items: center;
  gap: 10px;
}

#logoHeader img {
  width: 150px;
  height: auto;
}

#telefoneBox {
  background: #3a3a3a;
  border: none;
  color: #fff;
  padding: 8px;
  border-radius: 8px;
  width: 160px;
}

#search {
  background: #3a3a3a;
  border: none;
  padding: 8px;
  border-radius: 8px;
  color: #fff;
  width: 200px;
}

#btnRow {
  display: flex;
  gap: 10px;
}

header button {
  background: #94CF4F;
  border: none;
  color: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
}

header button:hover {
  background: #7DB63A;
}

/* --------------- BARRA DE LOGOS (FILTROS) ---------------- */

#logoFilterBar {
  display: flex;
  align-items: center;
  gap: 20px;
  overflow-x: auto;
  padding: 10px 0;
  scrollbar-width: none;
}

#logoFilterBar::-webkit-scrollbar {
  display: none;
}

.logoBtn {
  cursor: pointer;
  opacity: 0.6;
  transition: 0.2s;
}

.logoBtn:hover {
  opacity: 1;
  transform: scale(1.1);
}

.logoBtn.active {
  opacity: 1;
  transform: scale(1.15);
}

.logoBtn img {
  height: 45px;
  width: auto;
  user-select: none;
}

/* ---------------- GRID DOS CARDS ---------------- */

main {
  flex: 1;
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 15px;
}

.card {
  background: #1e1e1e;
  border-radius: 10px;
  padding: 15px;
  position: relative;
  transition: 0.2s;
  height: 180px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.card:hover {
  transform: scale(1.03);
  background: #2a2a2a;
}

.card h4 {
  color: #94CF4F;
  margin: 0 0 5px 0;
  font-size: 18px;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.card p {
  margin: 2px 0;
  color: #ccc;
  font-size: 14px;
}

.edit-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  border: none;
  color: #aaa;
  cursor: pointer;
  font-size: 18px;
  display: none;
}

.card:hover .edit-btn {
  display: block;
}

.card input[type="checkbox"] {
  position: absolute;
  top: 10px;
  left: 10px;
  transform: scale(1.3);
  display: none;
}

.card.selected input[type="checkbox"] {
  display: block;
}

/* ---------------- POPUPS ---------------- */

.popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.popup.show {
  display: flex;
  opacity: 1;
}

.popup-content {
  background: #1e1e1e;
  padding: 20px;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
  transform: translateY(-30px);
  transition: 0.3s ease;
}

.popup.show .popup-content {
  transform: translateY(0);
}

.popup-content input,
.popup-content textarea {
  width: 100%;
  background: #3a3a3a;
  border: none;
  color: #fff;
  padding: 8px;
  border-radius: 6px;
  margin-top: 8px;
}

.popup-content button {
  background: #94CF4F;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  margin: 8px 5px 0 0;
}

.popup-content button:hover {
  background: #7DB63A;
}

/* -------------- NOTIFICA√á√ÉO -------------- */

#notification {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(30px);
  background: #94CF4F;
  color: #fff;
  padding: 12px 25px;
  border-radius: 8px;
  display: none;
  opacity: 0;
  transition: 0.4s;
}

#notification.show {
  display: block;
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ------------- CONTADOR ------------- */

#contador {
  position: fixed;
  top: 15px;
  right: 15px;
  background: #94CF4F;
  color: #fff;
  font-family: 'Poppins', sans-serif;
  font-weight: 900;
  font-size: 18px;
  padding: 10px 14px;
  border-radius: 50%;
  z-index: 999;
  box-shadow: 0 0 10px #000;
}

/* ----------------- FOOTER ----------------- */

footer {
  background: #1e1e1e;
  padding: 10px;
  text-align: center;
  color: #888;
  font-size: 14px;
}
</style>
</head>

<body>

<header>

  <!-- LINHA SUPERIOR -->
  <div id="topRow">

    <!-- LOGO + TELEFONE -->
    <div id="logoHeader">
      <img id="logoImg" src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Shark_Logo.png" alt="Logo SharkHub">
      <span style="font-size:20px;">üì≤</span>
      <input type="text" id="telefoneBox" value="(00) 0000-0000">
    </div>

    <!-- PESQUISA -->
    <input type="text" id="search" placeholder="Pesquisar...">

    <!-- BOT√ïES -->
    <div id="btnRow">
      <button id="addBtn">Adicionar</button>
      <button id="selectBtn">Selecionar</button>
      <button id="deleteBtn" style="display:none;">üóëÔ∏è Excluir</button>
      <button id="configBtn">Configura√ß√µes</button>
    </div>

  </div>


  <!-- BARRA DE LOGOS (FILTRO) -->
  <div id="logoFilterBar">

    <div class="logoBtn" data-marca="honda">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Honda_logo.png">
    </div>

    <div class="logoBtn" data-marca="yamaha">
      <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Yamaha_Motor_logo.png">
    </div>

    <div class="logoBtn" data-marca="bmw">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/BMW.svg">
    </div>

    <div class="logoBtn" data-marca="ducati">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Ducati_Logo.png">
    </div>

    <div class="logoBtn" data-marca="suzuki">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/Suzuki_logo_2.png">
    </div>

    <div class="logoBtn" data-marca="kawasaki">
      <img src="https://upload.wikimedia.org/wikipedia/commons/3/3b/Kawasaki-logo.svg">
    </div>

  </div>

</header>

<!-- CONTADOR -->
<div id="contador">0</div>

<!-- GRID DOS CARDS -->
<main id="cardsContainer"></main>

<footer>SharkHub Post ¬© 2025</footer>

<!-- ======================= POPUP ADICIONAR ======================= -->

<div class="popup" id="popupAdd">
  <div class="popup-content">
    <h3 id="popupTitle">Nova Descri√ß√£o</h3>

    <input type="text" id="titulo" placeholder="T√≠tulo">
    <input type="text" id="km" placeholder="Quilometragem">
    <input type="text" id="valor" placeholder="Valor">
    <textarea id="descricao" placeholder="Descri√ß√£o..."></textarea>

    <button id="salvarBtn">Salvar</button>
    <button id="cancelarBtn">Cancelar</button>
  </div>
</div>

<!-- ======================= POPUP CONFIG ======================= -->

<div class="popup" id="popupConfig">
  <div class="popup-content">
    <h3>Configura√ß√µes</h3>

    <button onclick="alternarTema()">Alternar Tema</button>

    <button onclick="abrirPopupBackup()">üíæ Backup</button>

    <button onclick="fecharPopup('popupConfig')">Fechar</button>
  </div>
</div>

<!-- ======================= POPUP BACKUP ======================= -->

<div id="popupBackup" class="popup">
  <div class="popup-content">
    <h3>Backup / Importar - Exportar</h3>
    <p>Escolha o que deseja fazer:</p>

    <div style="display:flex;flex-direction:column;gap:10px;">
      <button onclick="exportarBackup()">‚¨áÔ∏è Exportar dados</button>

      <input type="file" id="inputBackup" style="display:none;" accept=".json">

      <button onclick="document.getElementById('inputBackup').click()">‚¨ÜÔ∏è Importar dados</button>

      <button onclick="fecharPopup('popupBackup')">Fechar</button>
    </div>

  </div>
</div>

<!-- NOTIFICA√á√ÉO FLOAT -->
<div id="notification"></div>
<script>

/* ------------------ DADOS INICIAIS ------------------ */
let descricoes = JSON.parse(localStorage.getItem('descricoes') || '[]');
let numero = localStorage.getItem('numero') || "(00) 0000-0000";
let editIndex = null;
let modoSelecao = false;
let filtroMarca = null;

/* ------------------ ELEMENTOS ------------------ */
const telefoneBox = document.getElementById('telefoneBox');
const cardsContainer = document.getElementById('cardsContainer');
const notification = document.getElementById('notification');
const contador = document.getElementById('contador');
const logoImg = document.getElementById('logoImg');

const addBtn = document.getElementById('addBtn');
const selectBtn = document.getElementById('selectBtn');
const deleteBtn = document.getElementById('deleteBtn');
const configBtn = document.getElementById('configBtn');
const searchInput = document.getElementById('search');

const titulo = document.getElementById('titulo');
const km = document.getElementById('km');
const valor = document.getElementById('valor');
const descricao = document.getElementById('descricao');
const salvarBtn = document.getElementById('salvarBtn');
const cancelarBtn = document.getElementById('cancelarBtn');
const popupTitle = document.getElementById('popupTitle');

/* ------------------ MAPA DE MARCAS ------------------ */
const marcaKeywords = {
  honda: ["cg", "titan", "fan", "biz", "start", "xre", "cb"],
  yamaha: ["mt", "lander", "fazer", "r3", "factor", "neo"],
  bmw: ["g310", "s1000", "f800", "k1600"],
  ducati: ["panigale", "monster", "diavel", "streetfighter"],
  suzuki: ["gsx", "hayabusa", "burgman"],
  kawasaki: ["ninja", "z400", "z900", "versys"]
};

/* ------------------ NOTIFICA√á√ïES ------------------ */
function mostrarNotificacao(msg) {
  notification.textContent = msg;
  notification.classList.add('show');
  setTimeout(() => notification.classList.remove('show'), 3000);
}

/* ------------------ CONTADOR ------------------ */
function atualizarContador() {
  contador.textContent = descricoes.length;
}

/* ------------------ TEMA ------------------ */
function alternarTema() {
  document.body.classList.toggle('light');
  atualizarLogo();
}

function atualizarLogo() {
  if (document.body.classList.contains('light')) {
    logoImg.src = "img/Design sem nome (1).png";
  } else {
    logoImg.src = "img/Design sem nome.png";
  }
}

/* ------------------ POPUP ------------------ */
function abrirPopup(id) {
  document.getElementById(id).classList.add('show');
}
function fecharPopup(id) {
  document.getElementById(id).classList.remove('show');
}

/* ------------------ SALVAR ------------------ */
function salvar() {
  localStorage.setItem('descricoes', JSON.stringify(descricoes));
  localStorage.setItem('numero', numero);
  render();
}

/* ------------------ RENDER ------------------ */
function render() {
  cardsContainer.innerHTML = "";
  const search = searchInput.value.trim().toLowerCase();

  descricoes.forEach((d, index) => {

    /* --- FILTRO POR MARCA --- */
    if (filtroMarca) {
      const palavras = marcaKeywords[filtroMarca];
      let pertence = false;

      for (let p of palavras) {
        if (d.titulo.toLowerCase().includes(p)) {
          pertence = true;
          break;
        }
      }

      if (!pertence) return;
    }

    /* --- FILTRO DE PESQUISA --- */
    if (search && !d.titulo.toLowerCase().includes(search)) return;

    /* --- CRIAR CARD --- */
    const card = document.createElement('div');
    card.className = 'card';
    if (modoSelecao) card.classList.add('selected');

    /* Checkbox */
    const checkbox = document.createElement('input');
    checkbox.type = "checkbox";
    checkbox.dataset.index = index;

    /* Bot√£o editar */
    const editBtn = document.createElement('button');
    editBtn.className = "edit-btn";
    editBtn.innerHTML = "‚úèÔ∏è";
    editBtn.onclick = (e) => { e.stopPropagation(); editarDescricao(index); };

    /* Conte√∫do do card */
    card.innerHTML = `
      <h4>${d.titulo}</h4>
      <p>KM: ${d.km}</p>
      <p>Valor: ${d.valor}</p>
    `;

    card.prepend(checkbox);
    card.appendChild(editBtn);

    /* Clique para copiar */
    card.onclick = () => {
      if (modoSelecao) {
        checkbox.checked = !checkbox.checked;
        return;
      }

      const texto = `${d.descricao}\nüì≤ ${numero}`;
      navigator.clipboard.writeText(texto).then(() => {
        mostrarNotificacao("Descri√ß√£o copiada!");
      });
    };

    cardsContainer.appendChild(card);
  });

  atualizarContador();
}

/* ------------------ ADICIONAR ------------------ */
addBtn.onclick = () => {
  editIndex = null;
  titulo.value = "";
  km.value = "";
  valor.value = "";
  descricao.value = "";
  popupTitle.textContent = "Nova Descri√ß√£o";
  abrirPopup('popupAdd');
};

/* ------------------ M√ÅSCARA KM ------------------ */
km.addEventListener("input", () => {
  km.value = km.value.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ".");
});

/* ------------------ M√ÅSCARA VALOR ------------------ */
valor.addEventListener("input", () => {
  let v = valor.value.replace(/\D/g, "");
  v = (v / 100).toFixed(2) + "";
  v = v.replace(".", ",");
  v = v.replace(/\B(?=(\d{3})+(?!\d))/g, ".");
  valor.value = v;
});

/* ------------------ SALVAR NO POPUP ------------------ */
salvarBtn.onclick = () => {
  const t = titulo.value.trim();
  if (!t) return mostrarNotificacao("Digite um t√≠tulo v√°lido.");

  const data = {
    titulo: t,
    km: km.value,
    valor: valor.value,
    descricao: descricao.value
  };

  if (editIndex === null) descricoes.push(data);
  else descricoes[editIndex] = data;

  fecharPopup('popupAdd');
  salvar();
  mostrarNotificacao("Salvo com sucesso!");
};

/* ------------------ CANCELAR ------------------ */
cancelarBtn.onclick = () => fecharPopup('popupAdd');

/* ------------------ EDITAR ------------------ */
function editarDescricao(i) {
  const d = descricoes[i];

  editIndex = i;
  titulo.value = d.titulo;
  km.value = d.km;
  valor.value = d.valor;
  descricao.value = d.descricao;

  popupTitle.textContent = "Editar Descri√ß√£o";
  abrirPopup('popupAdd');
}

/* ------------------ SELE√á√ÉO ------------------ */
selectBtn.onclick = () => {
  modoSelecao = !modoSelecao;
  deleteBtn.style.display = modoSelecao ? "inline-block" : "none";
  render();
};

/* ------------------ EXCLUS√ÉO ------------------ */
deleteBtn.onclick = () => {
  const selecionados = document.querySelectorAll(".card input:checked");
  if (selecionados.length === 0) return mostrarNotificacao("Nenhum item selecionado.");

  if (!confirm("Deseja excluir os itens selecionados?")) return;

  const indices = [...selecionados].map(c => Number(c.dataset.index));
  indices.sort((a, b) => b - a).forEach(i => descricoes.splice(i, 1));

  modoSelecao = false;
  deleteBtn.style.display = "none";
  salvar();
};

/* ------------------ CONFIG ------------------ */
configBtn.onclick = () => abrirPopup('popupConfig');

/* ------------------ PESQUISA ------------------ */
searchInput.addEventListener("input", render);

/* ------------------ TELEFONE ------------------ */
telefoneBox.value = numero;
telefoneBox.addEventListener("input", () => {
  numero = telefoneBox.value;
  localStorage.setItem("numero", numero);
});

/* ------------------ BACKUP ------------------ */
function abrirPopupBackup() { abrirPopup('popupBackup'); }

function exportarBackup() {
  const data = { descricoes, numero };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "backup_sharkhub.json";
  a.click();
  mostrarNotificacao("Backup exportado!");
}

document.getElementById("inputBackup").addEventListener("change", (event) => {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();

  reader.onload = (e) => {
    try {
      const data = JSON.parse(e.target.result);
      const novos = data.descricoes || [];

      const existenteSet = new Set(descricoes.map(d => JSON.stringify(d)));

      novos.forEach(n => {
        const txt = JSON.stringify(n);
        if (!existenteSet.has(txt)) descricoes.push(n);
      });

      if (data.numero) {
        numero = data.numero;
        telefoneBox.value = numero;
      }

      salvar();
      mostrarNotificacao("Backup importado!");
    } catch (err) {
      mostrarNotificacao("Erro no arquivo.");
    }
  };

  reader.readAsText(file);
});

/* ------------------ FILTRO POR LOGOS ------------------ */
document.querySelectorAll(".logoBtn").forEach(btn => {
  btn.onclick = () => {
    const marca = btn.dataset.marca;

    if (filtroMarca === marca) {
      filtroMarca = null;
      btn.classList.remove("active");
    } else {
      filtroMarca = marca;

      document.querySelectorAll(".logoBtn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    }

    render();
  };
});

/* ------------------ ONLOAD ------------------ */
window.onload = () => {
  atualizarLogo();
  render();
};

</script>

</body>
</html>
