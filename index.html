<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SharkHub Post</title>
<style>
  body {
    background-color: var(--bg);
    color: var(--text);
    font-family: Arial, sans-serif;
    transition: 0.3s;
  }
  :root {
    --bg: #121212;
    --text: #fff;
    --card: #1f1f1f;
  }
  body.light {
    --bg: #f5f5f5;
    --text: #000;
    --card: #fff;
  }
  #checklistContainer {
    display: none;
    position: fixed;
    top: 5%;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 700px;
    background: var(--card);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 0 20px #0005;
    z-index: 9999;
  }
  .checkItem {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 8px 0;
    background: var(--bg);
    padding: 10px;
    border-radius: 12px;
  }
  button {
    background: #90c64c;
    border: none;
    color: white;
    border-radius: 10px;
    padding: 6px 10px;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover {
    opacity: 0.8;
  }
  #timerDisplay {
    font-size: 1.4em;
    margin: 10px 0;
  }
  .closeBtn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- Bot√£o de abrir checklist -->
<button id="openChecklistBtn" style="position:fixed;bottom:20px;right:20px;">Checklist üèçÔ∏è</button>

<!-- Janela de checklist -->
<div id="checklistContainer">
  <span class="closeBtn" onclick="fecharChecklist()">‚úñ</span>
  <h2>Checklist de Motos</h2>
  <div id="timerDisplay">‚è±Ô∏è 00:00</div>
  <div>
    <button onclick="toggleTimer()">‚ñ∂Ô∏è / ‚è∏Ô∏è</button>
    <button onclick="resetTimer()">üîÑ Reset</button>
  </div>
  <p id="tempoInfo"></p>
  <hr>
  <div id="checklist"></div>
</div>

<script>
const motos = [
  { nome: "CG 160 Start 2021", descricao: "‚úÖ CG 160 Start 2021 - completa, revisada e pronta pra rodar." },
  { nome: "XRE 190 2023", descricao: "üèçÔ∏è XRE 190 2023 - conforto e desempenho em duas rodas." },
  { nome: "Yamaha Fazer 250 2018", descricao: "üí™ Fazer 250 2018 - moto robusta, ideal pro dia a dia." }
];

let tempo = 0;
let timerInterval = null;
let rodando = false;

function abrirChecklist() {
  const container = document.getElementById("checklist");
  container.innerHTML = "";
  motos.forEach((m, i) => {
    const div = document.createElement("div");
    div.className = "checkItem";
    div.innerHTML = `
      <span>${m.nome}</span>
      <div>
        <button onclick="copiarDescricao(${i})">üìã</button>
        <button onclick="toggleCamera(${i})">üì∏</button>
        <button onclick="confirmarMoto(${i})">‚úÖ</button>
      </div>`;
    container.appendChild(div);
  });
  document.getElementById("checklistContainer").style.display = "block";
  aplicarTema();
}

function fecharChecklist() {
  document.getElementById("checklistContainer").style.display = "none";
}

function toggleTimer() {
  if (rodando) {
    clearInterval(timerInterval);
    rodando = false;
  } else {
    rodando = true;
    timerInterval = setInterval(() => {
      tempo++;
      atualizarTempo();
    }, 1000);
  }
}

function resetTimer() {
  clearInterval(timerInterval);
  tempo = 0;
  rodando = false;
  atualizarTempo();
}

function atualizarTempo() {
  const min = String(Math.floor(tempo / 60)).padStart(2, '0');
  const seg = String(tempo % 60).padStart(2, '0');
  document.getElementById("timerDisplay").textContent = `‚è±Ô∏è ${min}:${seg}`;
}

function copiarDescricao(i) {
  navigator.clipboard.writeText(motos[i].descricao);
  if (!rodando) toggleTimer(); // s√≥ despausa se estiver pausado
}

function toggleCamera(i) {
  let desc = motos[i].descricao;
  if (!desc.includes("üì∏")) {
    motos[i].descricao += " üì∏";
  } else {
    motos[i].descricao = desc.replace("üì∏", "").trim();
  }
  alert(`C√¢mera ${desc.includes("üì∏") ? 'removida' : 'adicionada'} para ${motos[i].nome}`);
}

function confirmarMoto(i) {
  const item = document.querySelectorAll('.checkItem')[i];
  item.style.opacity = "0.5";
  item.querySelector('div').innerHTML = "‚úîÔ∏è Feito";
  if ([...document.querySelectorAll('.checkItem')].every(e => e.style.opacity === "0.5")) {
    encerrarChecklist();
  }
}

function encerrarChecklist() {
  clearInterval(timerInterval);
  rodando = false;
  const tempoAntigo = localStorage.getItem("tempoAntigo") || 0;
  const recorde = localStorage.getItem("recorde") || 999999;
  localStorage.setItem("tempoAntigo", tempo);
  if (tempo < recorde) {
    localStorage.setItem("recorde", tempo);
    document.getElementById("tempoInfo").innerText = `‚è±Ô∏è Tempo atual: ${formatarTempo(tempo)}\nüèÜ Novo recorde!`;
  } else {
    document.getElementById("tempoInfo").innerText = `‚è±Ô∏è Tempo atual: ${formatarTempo(tempo)}\n‚è≥ Recorde: ${formatarTempo(recorde)}\nTempo anterior: ${formatarTempo(tempoAntigo)}`;
  }
}

function formatarTempo(t) {
  const min = String(Math.floor(t / 60)).padStart(2, '0');
  const seg = String(t % 60).padStart(2, '0');
  return `${min}:${seg}`;
}

function aplicarTema() {
  if (document.body.classList.contains("light")) {
    document.getElementById("checklistContainer").classList.add("light");
  } else {
    document.getElementById("checklistContainer").classList.remove("light");
  }
}

document.getElementById("openChecklistBtn").onclick = abrirChecklist;
</script>
</body>
</html>
