<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SharkHub Post</title>
<link rel="icon" type="image/png" href="img/fivecon.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&display=swap" rel="stylesheet">
<style>
/* === SEU ESTILO ORIGINAL + AJUSTE DO CHECKLIST === */
* { box-sizing: border-box; font-family: Arial, sans-serif; transition: all 0.3s ease; }
body {
  background-color: #121212;
  color: #fff;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #1e1e1e;
  padding: 10px 20px;
  flex-wrap: wrap;
}
#logoHeader { display: flex; align-items: center; gap: 10px; }
#logoHeader img { width: 150px; height: auto; }
#telefoneBox {
  background: #3a3a3a;
  border: none;
  color: #fff;
  padding: 8px;
  border-radius: 8px;
  width: 160px;
}
header input[type="text"] {
  background: #3a3a3a;
  border: none;
  padding: 8px;
  border-radius: 8px;
  color: #fff;
}
header button {
  background: #94CF4F;
  border: none;
  color: white;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  margin: 5px;
}
header button:hover { background: #7DB63A; }
main {
  flex: 1;
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 15px;
}
.card {
  background: #1e1e1e;
  border-radius: 10px;
  padding: 15px;
  position: relative;
  transition: transform 0.2s, background 0.3s;
}
.card:hover { transform: scale(1.02); background: #2a2a2a; }
.card h4 { color: #94CF4F; margin: 0 0 8px 0; }
footer { background: #1e1e1e; padding: 10px; text-align: center; color: #888; font-size: 14px; }

/* === ESTILOS ADICIONAIS DO CHECKLIST === */
#checklistContainer {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
#timer { font-size: 16px; margin-bottom: 10px; font-weight: bold; }
.check-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #2a2a2a;
  padding: 10px;
  border-radius: 6px;
}
.check-item label { flex: 1; margin-left: 8px; }
#cameraPreview { width: 100%; border-radius: 8px; margin-top: 10px; }

/* === POPUP PADR√ÉO === */
.popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1000;
}
.popup.show { display: flex; opacity: 1; }
.popup-content {
  background: #1e1e1e;
  padding: 20px;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
  transform: translateY(-30px);
  transition: transform 0.3s ease;
}
.popup.show .popup-content { transform: translateY(0); }
.popup-content button {
  background: #94CF4F;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  margin: 8px 5px 0 0;
}
.popup-content button:hover { background: #7DB63A; }

#notification {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #94CF4F;
  color: #fff;
  padding: 12px 25px;
  border-radius: 8px;
  display: none;
  opacity: 0;
  transition: opacity 0.4s ease;
  z-index: 2000;
}
#notification.show { display: block; opacity: 1; }
</style>
</head>
<body>

<header>
  <div id="logoHeader">
    <img id="logoImg" src="img/Design sem nome.png" alt="Logo SharkHub">
    <input type="text" id="telefoneBox" value="(00) 0000-0000">
  </div>
  <div>
    <button id="addBtn">Adicionar</button>
    <button id="configBtn">Configura√ß√µes</button>
    <button id="checklistBtn">üìã Checklist</button>
  </div>
</header>

<main id="cardsContainer"></main>
<footer>SharkHub Post ¬© 2025</footer>
<div id="notification"></div>

<!-- POPUP DO CHECKLIST -->
<div id="popupChecklist" class="popup">
  <div class="popup-content">
    <h3>Checklist de Inspe√ß√£o</h3>
    <div id="timer">‚è± Tempo: 00:00</div>
    <div id="checklistContainer"></div>
    <video id="cameraPreview" autoplay playsinline></video>
    <button id="fotoBtn">üì∏ Tirar Foto</button>
    <button id="fecharChecklistBtn">Fechar</button>
  </div>
</div>

<script>
// === FUN√á√ïES DE UTILIDADE ===
function mostrarNotificacao(msg) {
  const n = document.getElementById("notification");
  n.textContent = msg;
  n.classList.add("show");
  setTimeout(() => n.classList.remove("show"), 2000);
}

function abrirPopup(id) {
  const p = document.getElementById(id);
  p.classList.add("show");
}

function fecharPopup(id) {
  const p = document.getElementById(id);
  p.classList.remove("show");
}

// === CHECKLIST ===
const checklistPadrao = [
  "Pneus em bom estado",
  "Freios funcionando",
  "Luzes e setas ok",
  "Painel funcionando",
  "Documentos conferidos",
  "N√≠vel de √≥leo verificado",
  "Corrente lubrificada"
];

const checklistContainer = document.getElementById("checklistContainer");
const timerEl = document.getElementById("timer");
let tempo = 0, intervalo, stream = null;

function iniciarChecklist() {
  checklistContainer.innerHTML = "";
  checklistPadrao.forEach((item, i) => {
    const div = document.createElement("div");
    div.className = "check-item";
    div.innerHTML = `<input type="checkbox" id="chk${i}"><label for="chk${i}">${item}</label>`;
    checklistContainer.appendChild(div);
  });

  tempo = 0;
  clearInterval(intervalo);
  intervalo = setInterval(() => {
    tempo++;
    const m = String(Math.floor(tempo / 60)).padStart(2, "0");
    const s = String(tempo % 60).padStart(2, "0");
    timerEl.textContent = `‚è± Tempo: ${m}:${s}`;
  }, 1000);

  iniciarCamera();
}

async function iniciarCamera() {
  try {
    stream = await navigator.mediaDevices.getUserMedia({ video: true });
    document.getElementById("cameraPreview").srcObject = stream;
  } catch {
    mostrarNotificacao("‚ö†Ô∏è C√¢mera n√£o acess√≠vel");
  }
}

// Tirar foto
document.getElementById("fotoBtn").onclick = () => {
  if (!stream) return mostrarNotificacao("C√¢mera n√£o iniciada");
  const video = document.getElementById("cameraPreview");
  const canvas = document.createElement("canvas");
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  const ctx = canvas.getContext("2d");
  ctx.drawImage(video, 0, 0);
  const foto = canvas.toDataURL("image/png");
  localStorage.setItem("fotoChecklist", foto);
  mostrarNotificacao("üì∏ Foto salva localmente!");
};

// Abrir checklist
document.getElementById("checklistBtn").onclick = () => {
  abrirPopup("popupChecklist");
  iniciarChecklist();
};

// Fechar checklist
document.getElementById("fecharChecklistBtn").onclick = () => {
  fecharPopup("popupChecklist");
  clearInterval(intervalo);
  if (stream) {
    stream.getTracks().forEach(t => t.stop());
    stream = null;
  }
};
</script>
</body>
</html>
